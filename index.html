<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Notepad Timer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Use UMD builds of React and ReactDOM which work directly in the browser -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel to transpile JSX in the browser -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/"
  }
}
</script>
</head>

<body class="bg-gray-900 text-white p-6">
  <div id="root"></div>

  <!-- All application code is now in this single script block -->
  <script type="text/babel" data-presets="react,typescript">
    const { useState, useEffect, useRef, useCallback } = React;

    // --- from components/icons.tsx ---
    const PlayIcon = ({ className }) => (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}>
        <path fillRule="evenodd" d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.648c1.295.742 1.295 2.545 0 3.286L7.279 20.99c-1.25.717-2.779-.217-2.779-1.643V5.653z" clipRule="evenodd" />
      </svg>
    );

    const PauseIcon = ({ className }) => (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}>
        <path fillRule="evenodd" d="M6.75 5.25a.75.75 0 01.75.75v12a.75.75 0 01-1.5 0v-12a.75.75 0 01.75-.75zm9 0a.75.75 0 01.75.75v12a.75.75 0 01-1.5 0v-12a.75.75 0 01.75-.75z" clipRule="evenodd" />
      </svg>
    );

    const ResetIcon = ({ className }) => (
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}>
        <path fillRule="evenodd" d="M4.755 10.059a7.5 7.5 0 0112.548-3.364l1.903 1.903h-4.518a.75.75 0 00-.75.75v4.518l1.903-1.903a.75.75 0 00-1.06-1.06l-1.903 1.903a5.997 5.997 0 00-9.07 7.01l-1.903 1.903a.75.75 0 00-1.06-1.06l1.903-1.903A7.475 7.475 0 014.755 10.059z" clipRule="evenodd" />
      </svg>
    );

    // --- from components/Timer.tsx ---
    const Timer = () => {
      const [initialSeconds, setInitialSeconds] = useState(300);
      const [seconds, setSeconds] = useState(300);
      const [isRunning, setIsRunning] = useState(false);
      
      const [inputHours, setInputHours] = useState('00');
      const [inputMinutes, setInputMinutes] = useState('05');
      const [inputSeconds, setInputSeconds] = useState('00');
      
      const intervalRef = useRef(null);

      const handleTimeChange = (setter, value, max) => {
        const numValue = parseInt(value, 10);
        if (value === '' || (!isNaN(numValue) && numValue >= 0 && numValue <= max)) {
           setter(value);
        }
      };
      
      const handleTimeBlur = (setter, value) => {
          setter(value.padStart(2, '0').slice(-2));
      }

      const setTimer = useCallback(() => {
        const h = parseInt(inputHours, 10) || 0;
        const m = parseInt(inputMinutes, 10) || 0;
        const s = parseInt(inputSeconds, 10) || 0;
        const totalSeconds = h * 3600 + m * 60 + s;
        setInitialSeconds(totalSeconds);
        setSeconds(totalSeconds);
        setIsRunning(false);
      }, [inputHours, inputMinutes, inputSeconds]);

      useEffect(() => {
        if(!isRunning) {
            setTimer();
        }
      }, [inputHours, inputMinutes, inputSeconds, isRunning, setTimer]);

      useEffect(() => {
        if (isRunning && seconds > 0) {
          intervalRef.current = setInterval(() => {
            setSeconds(prev => prev - 1);
          }, 1000);
        } else if (seconds === 0 && isRunning) {
          setIsRunning(false);
          alert("Time's up!");
        }

        return () => {
          if (intervalRef.current) {
            clearInterval(intervalRef.current);
          }
        };
      }, [isRunning, seconds]);

      const handleStartPause = () => {
        if (initialSeconds > 0) {
          setIsRunning(!isRunning);
        }
      };

      const handleReset = () => {
        setIsRunning(false);
        setSeconds(initialSeconds);
      };
      
      const formatTime = (timeInSeconds) => {
        const h = Math.floor(timeInSeconds / 3600).toString().padStart(2, '0');
        const m = Math.floor((timeInSeconds % 3600) / 60).toString().padStart(2, '0');
        const s = (timeInSeconds % 60).toString().padStart(2, '0');
        return { h, m, s };
      };

      const { h, m, s } = formatTime(seconds);
      const isTimeUp = initialSeconds > 0 && seconds === 0;

      return (
        <div className="bg-slate-800/50 rounded-xl shadow-lg ring-1 ring-white/10 p-4 flex flex-col justify-between lg:w-56 lg:flex-shrink-0">
          <div>
            <h2 className="text-xl font-bold text-cyan-300 mb-2">Focus Timer</h2>
            <div className={`text-center my-2 font-mono text-4xl tracking-wider ${isTimeUp ? 'text-red-500 animate-pulse' : 'text-white'}`}>
              <span>{h}</span><span className="text-slate-500">:</span><span>{m}</span><span className="text-slate-500">:</span><span>{s}</span>
            </div>
            
            <div className="flex justify-center items-center gap-1 my-4">
              <input 
                type="text" 
                value={inputHours} 
                onChange={(e) => handleTimeChange(setInputHours, e.target.value, 99)}
                onBlur={(e) => handleTimeBlur(setInputHours, e.target.value)}
                className="w-12 text-center bg-slate-900/70 border border-slate-700 rounded-md p-1 text-base focus:ring-2 focus:ring-cyan-500 focus:outline-none disabled:opacity-50"
                disabled={isRunning}
                maxLength={2}
              />
              <span className="text-lg font-bold text-slate-500">:</span>
              <input 
                type="text" 
                value={inputMinutes}
                onChange={(e) => handleTimeChange(setInputMinutes, e.target.value, 59)}
                onBlur={(e) => handleTimeBlur(setInputMinutes, e.target.value)}
                className="w-12 text-center bg-slate-900/70 border border-slate-700 rounded-md p-1 text-base focus:ring-2 focus:ring-cyan-500 focus:outline-none disabled:opacity-50"
                disabled={isRunning}
                maxLength={2}
              />
              <span className="text-lg font-bold text-slate-500">:</span>
              <input 
                type="text" 
                value={inputSeconds}
                onChange={(e) => handleTimeChange(setInputSeconds, e.target.value, 59)}
                onBlur={(e) => handleTimeBlur(setInputSeconds, e.target.value)}
                className="w-12 text-center bg-slate-900/70 border border-slate-700 rounded-md p-1 text-base focus:ring-2 focus:ring-cyan-500 focus:outline-none disabled:opacity-50"
                disabled={isRunning}
                maxLength={2}
              />
            </div>
            <p className="text-center text-xs text-slate-500 mb-4">HH:MM:SS</p>
          </div>

          <div className="flex justify-center items-center gap-2 mt-auto">
            <button
              onClick={handleStartPause}
              disabled={initialSeconds === 0 && !isRunning}
              className="w-20 h-9 flex items-center justify-center gap-1 bg-cyan-500 hover:bg-cyan-400 disabled:bg-slate-600 disabled:cursor-not-allowed text-slate-900 font-bold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-cyan-400"
            >
              {isRunning ? <PauseIcon className="w-5 h-5" /> : <PlayIcon className="w-5 h-5" />}
              <span className="text-sm">{isRunning ? 'Pause' : 'Start'}</span>
            </button>
            <button
              onClick={handleReset}
              className="w-20 h-9 flex items-center justify-center gap-1 bg-slate-600 hover:bg-slate-500 text-white font-bold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-slate-500"
            >
              <ResetIcon className="w-4 h-4" />
              <span className="text-sm">Reset</span>
            </button>
          </div>
        </div>
      );
    };

    // --- from components/Notepad.tsx ---
    const Notepad = () => {
      const [note, setNote] = useState('');

      useEffect(() => {
        const savedNote = localStorage.getItem('savedNote');
        if (savedNote) {
          setNote(savedNote);
        }
      }, []);

      const handleSave = () => {
        localStorage.setItem('savedNote', note);
        alert('Note saved successfully!');
      };

      const handleClear = () => {
        if (window.confirm('Are you sure you want to clear the entire notepad? This action cannot be undone.')) {
          setNote('');
          localStorage.removeItem('savedNote');
        }
      };

      return (
        <div className="bg-slate-800/50 rounded-xl shadow-lg ring-1 ring-white/10 p-6 flex flex-col flex-grow">
          <h2 className="text-2xl font-bold text-cyan-300 mb-4">Notepad</h2>
          <textarea
            value={note}
            onChange={(e) => setNote(e.target.value)}
            spellCheck="false"
            className="flex-grow w-full bg-slate-900/70 border border-slate-700 rounded-lg p-4 text-slate-300 placeholder-slate-500 focus:ring-2 focus:ring-cyan-500 focus:outline-none transition-shadow resize-none"
            style={{ minHeight: '300px' }}
          />
          <div className="flex justify-end gap-2 mt-4">
            <button
              onClick={handleClear}
              className="px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white font-bold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-slate-500"
            >
              Clear All
            </button>
            <button
              onClick={handleSave}
              className="px-4 py-2 bg-cyan-500 hover:bg-cyan-400 text-slate-900 font-bold rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-cyan-400"
            >
              Save Note
            </button>
          </div>
        </div>
      );
    };

    // --- from App.tsx ---
    const App = () => {
      return (
        <div className="min-h-screen bg-gradient-to-br from-gray-900 to-slate-800 text-white flex flex-col items-center justify-center p-4 sm:p-6 lg:p-8 font-sans">
          <header className="mb-8 text-center">
            <h1 className="text-4xl sm:text-5xl font-bold text-cyan-400 tracking-tight">Focus Pad</h1>
            <p className="text-slate-400 mt-2 text-lg">Your personal notepad with a focus timer.</p>
          </header>
          <main className="w-full max-w-5xl mx-auto flex flex-col lg:flex-row items-stretch gap-8">
            <Timer />
            <Notepad />
          </main>
          <footer className="mt-8 text-center text-slate-500 text-sm">
            <p>Built with React & Tailwind CSS.</p>
          </footer>
        </div>
      );
    };

    // --- from index.tsx ---
    const rootElement = document.getElementById('root');
    const root = ReactDOM.createRoot(rootElement);
    root.render(
      <React.StrictMode>
        <App />
      </React.StrictMode>
    );
  </script>
</body>
</html>